<!DOCTYPE html>
<html lang='en'>
    <head>
        <meta charset='UTF-8'>
        <meta name='viewport' content='width=device-width, initial-scale=1.0'>
        <title>FWC Label Generator</title>
        <script src='scripts/util.js'></script>
        <script src='scripts/main.js'></script>
        <script src='scripts/store.js'></script>
        <script src='scripts/printHistory.js'></script>
        <script src='scripts/hndLbChange.js'></script>
        <script src='https://cdn.jsdelivr.net/npm/jsbarcode@3.12.1/dist/barcodes/JsBarcode.code128.min.js'></script>
        <script src="https://html2canvas.hertzen.com/dist/html2canvas.min.js"></script>

        <link rel='stylesheet' href='styles/main.css'>
        <link rel='stylesheet' href='styles/sidebar.css'>
        <link rel='stylesheet' href='styles/header.css'>

        <link rel="preconnect" href="https://fonts.googleapis.com">
        <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
        <link href="https://fonts.googleapis.com/css2?family=Google+Sans+Flex:opsz,wght@6..144,1..1000&display=swap" rel="stylesheet">
    </head>
    <body>
        <noscript style="color: red; font-size: 36px;">Javascript is required for this tool to work properly. Please enable Javascript.</noscript>

        <div class='headerLogoContainer noprint'>
            <img class='headerLogo' src="./img/fw.png" alt="">
        </div>

        <div class='header noprint'>
            
            <div class='headerItem'>
                <label for="labelType">Label type:</label>
                <select name="labelType" id="labelType" onchange='lbTypeChange(this.selectedIndex)'>
                    <option disabled>-- Machining --</option>
                    <option value="machwip" selected>Machining WIP</option>
                    <option disabled>-- Inventory --</option>
                    <option value="invltdshelf">Inv Limited Shelf</option>
                    <option value="invwipfg">Inv WIP to FG</option>
                    <option value="invrec">Inv Recieve to Inv</option>
                    <option disabled>-- QC --</option>
                    <option value="qcpass">QC Pass</option>
                    <option value="qcfail">QC Fail</option>
                    <option value="qcfai">QC FAI</option>
                    <option value="qcinsp">QC Inspect</option>
                </select>
            </div>
            <div class='headerItem'>
                <label for="printType">Print using:</label>
                <select name="printType" id="printType" onchange='setPrintType(this.selectedIndex)'>
                    <option value="printapp" selected>FWCPrintApp</option>
                    <option value="chrome">Built-in</option>
                </select>
            </div>
        </div>

        <div class='sidebar noprint'>
            <div>
                <h3 class='phHeader'>Label history</h3>
            </div>

            <div id='prints'></div>
        </div>

        <div id='warnings' class='warnings noprint'></div>

        <div class='mainContent'>

            <div id='label'>
                <div id='img'>
                    <img id='logo' class='logo' src='./img/fw.png' alt='Fibreworks Composites Logo'>
                </div>
                <div class='data'>
                    <p class='bcNote'>PN</p>
                    <div class='section'>
                        <div class='barcodeContainer'>
                            <svg class='barcode' id='pn'></svg>
                        </div>
                    </div>
                    <hr class='hrNoTBMargin'>
    
                    <p class='bcNote'>LOT</p>
                    <div id='midsection' class='section flex'>
                        <div class='barcodeContainer'>
                            <svg class='barcode' id='lotBc'></svg>
                        </div>
                    </div>
                    <hr class='hrNoTBMargin'>
    
                    <!-- subsections dynamically created -->
                    <div id='subsections' class='section flex'></div>
                </div>
            </div>
    
            <div id='dataInput' class='noprint'>
                <form id='form' action="">
                    <h1>Label Parameters</h1>
                    <hr>
                    <label for="company">Company:</label>
                    <select name="company" id="company" onchange='updateCompany()' autocomplete='off'>
                        <option value="fw" selected>Fibreworks</option>
                        <option value="cf">Composite Factory</option>
                    </select>
                    <hr>
                    <label for="part">Part Number:</label>
                    <input type="text" name="part" id="part" placeholder='00000XX0000' value='00000XX0000' oninput='updatePnBarcode()'>
                    <br>
                    <label for="rev">Part Revision:</label>
                    <input type="text" name="rev" id="rev" placeholder='00' value='00' oninput='updatePnBarcode()'>
                    <hr>
                    <label for="lot">Lot Number:</label>
                    <input type="text" name="lot" id="lot" placeholder='defaults to WO# and date' oninput='updateLotBarcode()'>
                    <p style='color: red;' id='lotNote' hidden>Note: If above lot number is filled in, the lot number will not be automatically calculated according to WO/PO number, todays date, and CC if applicable.</p>
                    <hr>
                    <label for="wonum">Work Order:</label>
                    <input type="text" name="wonum" id="wonum" placeholder='000000-000' oninput='updateLotBarcode()'>
                    <br>
                    <div id='empdiv'>
                        <label for="emp">Employee ID:</label>
                        <input type="text" name="emp" id="emp" placeholder='0000' oninput='updateEmpId(this.value)'>
                        <br>

                    </div>
                    <label for="qty">Quantity:</label>
                    <input type="text" name="qty" id="qty" placeholder='00' oninput='document.getElementById("sslbquantity").textContent = this.value'>
                    <br>
                    <div id='ccdiv'>
                        <label for="cc">CC:</label>
                        <input type="text" name="cc" id="cc" placeholder='00' oninput='updateLotBarcode()'>
                        <br>
                    </div>
                    <div id='ncrdiv'>
                        <label for="ncr">NCR:</label>
                        <input type="text" name="ncr" id="ncr" placeholder='0000' oninput='gebi("sslbncr").textContent = this.value'>
                        <br>
                    </div>
                    <div id='expdiv'>
                        <label for="exp">Expiry date:</label>
                        <!-- <input type="exp" name="exp" id="exp" oninput='gebi("sslbncr").textContent = this.value'> -->
                        <input type="date" name="exp" id="exp" oninput='gebi("sslbexpdate").textContent = reformatDatePicker(this.value)'>
                        <br>
                    </div>
                </form>
            </div>

            <div class='noprint'>
                <button class='print' onclick='handlePrint()'>
                    <svg class='printSvg' version="1.1" id="Icons" xmlns="http://www.w3.org/2000/svg" xmlns:xlink="http://www.w3.org/1999/xlink" viewBox="0 0 32 32" xml:space="preserve" fill="#000000"><g id="SVGRepo_bgCarrier" stroke-width="0"></g><g id="SVGRepo_tracerCarrier" stroke-linecap="round" stroke-linejoin="round"></g><g id="SVGRepo_iconCarrier"> <style type="text/css"> .st0{fill:none;stroke:#000000;stroke-width:2;stroke-linecap:round;stroke-linejoin:round;stroke-miterlimit:10;} .st1{fill:none;stroke:#000000;stroke-width:2;stroke-linejoin:round;stroke-miterlimit:10;} </style> <rect x="7" y="19" class="st0" width="18" height="10"></rect> <polyline class="st0" points="19,3 19,9 25,9 19,3 7,3 7,14 25,14 25,9 "></polyline> <path class="st0" d="M25,10h2c1.1,0,2,0.9,2,2v11h-4"></path> <path class="st0" d="M7,10H5c-1.1,0-2,0.9-2,2v11h4"></path> </g></svg>
                    <p id='printBtnText'>Print with FWCPrintApp</p>
                </button>
            </div>
        </div>
    </body>
</html>